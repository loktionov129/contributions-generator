!function i(a,c,u){function s(t,e){if(!c[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=c[t]={exports:{}};a[t][0].call(o.exports,function(e){return s(a[t][1][e]||e)},o,o.exports,i,a,c,u)}return c[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"];function a(t){return i.findIndex(function(e){return e===t})}var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.color=e}var e,n,r;return e=t,r=[{key:"getIndexByColor",value:function(t){return i.findIndex(function(e){return e===t})}},{key:"random",value:function(){return i[Math.floor(Math.random()*i.length)]}}],(n=[{key:"next",value:function(){var e=a(this.color);return e+1===i.length?i[i.length-1]:i[e+1]}},{key:"prev",value:function(){var e=a(this.color);return 0===e?i[e]:i[e-1]}}])&&o(e.prototype,n),r&&o(e,r),t}();r.default=i[0],t.exports=r},{}],2:[function(e,t,n){"use strict";var r=e("../misc/file-loader");function o(e){return"rect"!==e.tagName.toLowerCase()}function i(){var e=this._appModel.getContributions();this._appView.drawContributions(e)}function a(){var n=this;this._appView.drawingModeChange$.subscribe(function(e){switch(e){case"click":n._appView.activateClickMode();break;case"move":n._appView.activateMoveMode();break;default:console.error("Unexpected mode: ".concat(e,"."))}}),this._appView.contributionIncrease$.subscribe(function(e){o(e)||this._appModel.increaseContributions(e)}.bind(this)),this._appView.contributionDecrease$.subscribe(function(e){o(e)||this._appModel.decreaseContributions(e)}.bind(this)),this._appView.generate$.subscribe(function(){var e=+n._appView.year.value||(new Date).getFullYear(),t=n._appModel.transformContributions(e);console.warn(t.join("\r\n")),r.download("dates.txt",t.join("\n"))}),this._appView.clear$.subscribe(function(){n._appModel.resetContributions(),i.call(n)}),this._appView.random$.subscribe(function(){n._appModel.setRandomContributions(),i.call(n)})}t.exports=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._appModel=t,this._appView=n,i.call(this),a.call(this)}},{"../misc/file-loader":4}],3:[function(e,t,n){"use strict";var r=e("./models/app.model"),o=e("./views/app.view"),i=e("./controllers/app.controller"),a=new r(r.randomState),c=new o;new i(a,c)},{"./controllers/app.controller":2,"./models/app.model":9,"./views/app.view":10}],4:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.FileLoader=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"download",value:function(e,t){var n=document.createElement("a");n.setAttribute("href","data:application/text;charset=utf-8,".concat(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"readFile",value:function(n){if(!window.FileReader||!window.File)return Promise.reject(new Error("The File APIs are not fully supported in this browser."));var r=n.files[0];return r?new Promise(function(t){var e=new FileReader;e.onload=function(e){n.value="",t(e.target.result)},e.readAsText(r)}):Promise.reject(new Error("No File"))}}],(n=null)&&o(t.prototype,n),r&&o(t,r),e}();n.FileLoader=r,t.exports=r},{}],5:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=e("./subscription"),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subscribers=[]}var t,n,r;return t=e,(n=[{key:"subscribe",value:function(t){var n=this;this._subscribers.push(t);return new i(function(){var e=n._subscribers.findIndex(function(e){return e===t});n._subscribers.splice(e,1)})}}])&&o(t.prototype,n),r&&o(t,r),e}();t.exports=r},{"./subscription":8}],6:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=e("./subject");function l(e,t){t.forEach(function(t){e.forEach(function(e){t.calledSubscribers[e]||(e(t.value),t.calledSubscribers[e]=!0)})})}var f=function(){function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=i(this,c(n).call(this)))._bufferSize=t,e._events=[],e}var e,t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,s),e=n,(t=[{key:"next",value:function(e){var t=0<arguments.length&&void 0!==e?e:null;this._events.length>this._bufferSize&&this._events.shift(),this._events.push({value:t,calledSubscribers:{}}),l(this._subscribers,this._events)}},{key:"subscribe",value:function(e){var t=a(c(n.prototype),"subscribe",this).call(this,e);return l(this._subscribers,this._events),t}}])&&o(e.prototype,t),r&&o(e,r),n}();t.exports=f},{"./subject":7}],7:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=e("./observable"),s=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,a(e).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(e,u),t=e,(n=[{key:"next",value:function(e){var t=0<arguments.length&&void 0!==e?e:null;this._subscribers.forEach(function(e){return e(t)})}},{key:"asObservable",value:function(){var t=this;return{subscribe:function(e){return t.subscribe(e)}}}}])&&o(t.prototype,n),r&&o(t,r),e}();t.exports=s},{"./observable":5}],8:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.callback=e}var e,n,r;return e=t,(n=[{key:"unsubscribe",value:function(){this.callback()}}])&&o(e.prototype,n),r&&o(e,r),t}();t.exports=r},{}],9:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=e("../color"),i="fill",f=53,b=7;function r(r){return Array.from(Array(f)).map(function(e,n){return{translate:14*n,rects:Array.from(Array(b)).map(function(e,t){return{dataCol:n,dataRow:t,color:r(),x:14-n,y:13*t,height:10,width:10}})}})}function a(){return r(function(){return l.random()})}function c(e,t){var n=new l(e.getAttribute(i));e.setAttribute(i,t(n))}var u=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._state=e}var e,n,r;return e=t,(n=[{key:"getContributions",value:function(){return this._state}},{key:"transformContributions",value:function(e){var t=[],n=new Date("".concat(e,".01.01"));n.setDate(1-n.getDay());for(var r=n.getDate(),o=0;o<f;o+=1)for(var i=0;i<b;i+=1){var a=l.getIndexByColor(this._state[o].rects[i].color);if(a){var c=new Date(n);c.setDate(r+i+o*b);var u=c.getDate(),s=c.getMonth();t.push("".concat(u,"/").concat(s,"/").concat(e,"/").concat(a))}}return t}},{key:"resetContributions",value:function(){this._state=t.emptyState}},{key:"setRandomContributions",value:function(){this._state=a()}},{key:"increaseContributions",value:function(e){c(e,function(e){return e.next()}),this.updateState(e)}},{key:"decreaseContributions",value:function(e){c(e,function(e){return e.prev()}),this.updateState(e)}},{key:"updateState",value:function(e){this._state[e.getAttribute("data-col")].rects[e.getAttribute("data-row")].color=e.getAttribute(i)}}])&&o(e.prototype,n),r&&o(e,r),t}();u.emptyState=r(function(){return l.default}),u.randomState=a(),t.exports=u},{"../color":1}],10:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=e("../misc/subject"),a=e("../misc/replay-subject"),c='form[name="settings"] input[name="mode"]';function u(e){switch(e.target.tagName.toLowerCase()){case"input":case"select":case"body":case"html":return;default:e.preventDefault()}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.year=document.getElementById("contributions__year"),this._contributions=document.getElementById("contributions__area"),this._changeContributions=function(e){switch(e.preventDefault(),e.buttons){case 1:this._contributionIncrease$.next(e.target);break;case 2:this._contributionDecrease$.next(e.target)}}.bind(this),this._enableDrawing=function(e){u(e),this._contributions.addEventListener("mousemove",this._handleCursorMoving)}.bind(this),this._disableDrawing=function(e){u(e),this._contributions.removeEventListener("mousemove",this._handleCursorMoving)}.bind(this),this._handleCursorMoving=function(e){var t=e.target;this._previousRect!==t&&"rect"===t.tagName&&(this._previousRect=t,this._changeContributions(e))}.bind(this),this._previousRect=null,function(){this._drawingModeChange$=new a,this.drawingModeChange$=this._drawingModeChange$.asObservable(),this._contributionIncrease$=new i,this.contributionIncrease$=this._contributionIncrease$.asObservable(),this._contributionDecrease$=new i,this.contributionDecrease$=this._contributionDecrease$.asObservable(),this._generate$=new i,this.generate$=this._generate$.asObservable(),this._clear$=new i,this.clear$=this._clear$.asObservable(),this._random$=new i,this.random$=this._random$.asObservable()}.call(this),function(){var t=this;document.getElementById("contributions__generate").addEventListener("click",function(e){e.preventDefault(),t._generate$.next(e.target)}),document.getElementById("contributions__clear").addEventListener("click",function(e){e.preventDefault(),t._clear$.next()}),document.getElementById("contributions__random").addEventListener("click",function(e){e.preventDefault(),t._random$.next()}),document.querySelectorAll(c).forEach(function(e){e.addEventListener("change",function(e){return t._drawingModeChange$.next(e.target.value)})}),document.addEventListener("selectionchange",function(e){return e.preventDefault()}),this._contributions.addEventListener("click",function(e){return e.preventDefault()}),this._contributions.addEventListener("contextmenu",function(e){return e.preventDefault()})}.call(this),function(){var e="checked",t=document.querySelector("".concat(c,":").concat(e));if(t)this._drawingModeChange$.next(t.value);else{var n=document.querySelector(c);this._drawingModeChange$.next(n.value),n.setAttribute(e,e)}}.call(this)}var t,n,r;return t=e,(n=[{key:"activateClickMode",value:function(){this._contributions.addEventListener("mousedown",this._changeContributions),document.removeEventListener("mousedown",this._enableDrawing),document.removeEventListener("mouseup",this._disableDrawing)}},{key:"activateMoveMode",value:function(){document.addEventListener("mousedown",this._enableDrawing),document.addEventListener("mouseup",this._disableDrawing),this._contributions.removeEventListener("mousedown",this._changeContributions)}},{key:"drawContributions",value:function(e){var t=e.map(function(e){var t=e.rects.map(function(e){return'<rect class="day" width="'.concat(e.width,'" height="').concat(e.height,'" x="').concat(e.x,'" y="').concat(e.y,'" fill="').concat(e.color,'" data-col="').concat(e.dataCol,'" data-row="').concat(e.dataRow,'"></rect>')}).join("");return'<g transform="translate('.concat(e.translate,', 0)">').concat(t,"</g>")}).join("");this._contributions.innerHTML=t}}])&&o(t.prototype,n),r&&o(t,r),e}();t.exports=r},{"../misc/replay-subject":6,"../misc/subject":7}]},{},[3]);