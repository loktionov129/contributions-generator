!function r(o,i,a){function c(e,t){if(!i[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=i[e]={exports:{}},o[e][0].call(n.exports,function(t){return c(o[e][1][t]||t)},n,n.exports,r,o,i,a)}return i[e].exports}for(var u="function"==typeof require&&require,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"];function a(e){return i.findIndex(function(t){return t===e})}var r=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.color=t}var t,n,r;return t=e,r=[{key:"getIndexByColor",value:function(e){return i.findIndex(function(t){return t===e})}},{key:"random",value:function(){return i[Math.floor(Math.random()*i.length)]}}],(n=[{key:"next",value:function(){var t=a(this.color);return t+1===i.length?i[i.length-1]:i[t+1]}},{key:"prev",value:function(){var t=a(this.color);return 0===t?i[t]:i[t-1]}}])&&o(t.prototype,n),r&&o(t,r),e}();r.default=i[0],e.exports=r},{}],2:[function(t,e,n){"use strict";var r=t("../misc/file-loader");function o(t){return"rect"!==t.tagName.toLowerCase()}function i(){var t=this._appModel.getContributions();this._appView.drawContributions(t)}function a(){var e=this;this._appView.drawingModeChange$.subscribe(function(t){switch(t){case"click":e._appView.activateClickMode();break;case"move":e._appView.activateMoveMode();break;default:console.error("Unexpected mode: ".concat(t,"."))}}),this._appView.contributionIncrease$.subscribe(function(t){o(t)||this._appModel.increaseContributions(t)}.bind(this)),this._appView.contributionDecrease$.subscribe(function(t){o(t)||this._appModel.decreaseContributions(t)}.bind(this)),this._appView.generate$.subscribe(function(){var t=+e._appView.year.value||(new Date).getFullYear(),t=e._appModel.transformContributions(t);console.warn(t.join("\r\n")),r.download("dates.txt",t.join("\n"))}),this._appView.clear$.subscribe(function(){e._appModel.resetContributions(),i.call(e)}),this._appView.random$.subscribe(function(){e._appModel.setRandomContributions(),i.call(e)})}e.exports=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._appModel=e,this._appView=n,i.call(this),a.call(this)}},{"../misc/file-loader":4}],3:[function(t,e,n){"use strict";var r=t("./models/app.model"),o=t("./views/app.view"),t=t("./controllers/app.controller"),r=new r(r.randomState),o=new o;new t(r,o)},{"./controllers/app.controller":2,"./models/app.model":9,"./views/app.view":10}],4:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.FileLoader=void 0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"download",value:function(t,e){var n=document.createElement("a");n.setAttribute("href","data:application/text;charset=utf-8,".concat(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"readFile",value:function(n){if(!window.FileReader||!window.File)return Promise.reject(new Error("The File APIs are not fully supported in this browser."));var r=n.files[0];return r?new Promise(function(e){var t=new FileReader;t.onload=function(t){n.value="",e(t.target.result)},t.readAsText(r)}):Promise.reject(new Error("No File"))}}],(n=null)&&o(e.prototype,n),r&&o(e,r),t}();n.FileLoader=r,e.exports=r},{}],5:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=t("./subscription");e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._subscribers=[]}var e,n,r;return e=t,(n=[{key:"subscribe",value:function(e){var n=this;this._subscribers.push(e);return new i(function(){var t=n._subscribers.findIndex(function(t){return t===e});n._subscribers.splice(t,1)})}}])&&o(e.prototype,n),r&&o(e,r),t}()},{"./subscription":8}],6:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n);return t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=t("./subject");function f(t,e){e.forEach(function(e){t.forEach(function(t){e.calledSubscribers[t]||(t(e.value),e.calledSubscribers[t]=!0)})})}e.exports=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(o,l);var t,e,n,r=u(o);function o(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this))._bufferSize=e,t._events=[],t}return t=o,(e=[{key:"next",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._events.length>this._bufferSize&&this._events.shift(),this._events.push({value:t,calledSubscribers:{}}),f(this._subscribers,this._events)}},{key:"subscribe",value:function(t){t=a(s(o.prototype),"subscribe",this).call(this,t);return f(this._subscribers,this._events),t}}])&&i(t.prototype,e),n&&i(t,n),o}()},{"./subject":7}],7:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(n);return t=r?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==o(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=t("./observable");e.exports=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(o,s);var t,e,n,r=c(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return t=o,(e=[{key:"next",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._subscribers.forEach(function(t){return t(e)})}},{key:"asObservable",value:function(){var e=this;return{subscribe:function(t){return e.subscribe(t)}}}}])&&i(t.prototype,e),n&&i(t,n),o}()},{"./observable":5}],8:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}e.exports=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.callback=t}var t,n,r;return t=e,(n=[{key:"unsubscribe",value:function(){this.callback()}}])&&o(t.prototype,n),r&&o(t,r),e}()},{}],9:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=t("../color"),i="fill",l=53,f=7;function r(r){return Array.from(Array(l)).map(function(t,n){return{translate:14*n,rects:Array.from(Array(f)).map(function(t,e){return{dataCol:n,dataRow:e,color:r(),x:14-n,y:13*e,height:10,width:10}})}})}function a(){return r(function(){return s.random()})}function c(t,e){var n=new s(t.getAttribute(i));t.setAttribute(i,e(n))}t=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._state=t}var t,n,r;return t=e,(n=[{key:"getContributions",value:function(){return this._state}},{key:"transformContributions",value:function(t){var e=[],n=new Date("".concat(t,".01.01"));n.setDate(1-n.getDay());for(var r=n.getDate(),o=0;o<l;o+=1)for(var i=0;i<f;i+=1){var a,c,u=s.getIndexByColor(this._state[o].rects[i].color);u&&((c=new Date(n)).setDate(r+i+o*f),a=c.getDate(),c=c.getMonth(),e.push("".concat(a,"/").concat(c,"/").concat(t,"/").concat(u)))}return e}},{key:"resetContributions",value:function(){this._state=e.emptyState}},{key:"setRandomContributions",value:function(){this._state=a()}},{key:"increaseContributions",value:function(t){c(t,function(t){return t.next()}),this.updateState(t)}},{key:"decreaseContributions",value:function(t){c(t,function(t){return t.prev()}),this.updateState(t)}},{key:"updateState",value:function(t){this._state[t.getAttribute("data-col")].rects[t.getAttribute("data-row")].color=t.getAttribute(i)}}])&&o(t.prototype,n),r&&o(t,r),e}();t.emptyState=r(function(){return s.default}),t.randomState=a(),e.exports=t},{"../color":1}],10:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=t("../misc/subject"),a=t("../misc/replay-subject"),c='form[name="settings"] input[name="mode"]';function u(t){switch(t.target.tagName.toLowerCase()){case"input":case"select":case"body":case"html":return;default:t.preventDefault()}}e.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.year=document.getElementById("contributions__year"),this._contributions=document.getElementById("contributions__area"),this._changeContributions=function(t){switch(t.preventDefault(),t.buttons){case 1:this._contributionIncrease$.next(t.target);break;case 2:this._contributionDecrease$.next(t.target)}}.bind(this),this._enableDrawing=function(t){u(t),this._contributions.addEventListener("mousemove",this._handleCursorMoving)}.bind(this),this._disableDrawing=function(t){u(t),this._contributions.removeEventListener("mousemove",this._handleCursorMoving)}.bind(this),this._handleCursorMoving=function(t){var e=t.target;this._previousRect!==e&&"rect"===e.tagName&&(this._previousRect=e,this._changeContributions(t))}.bind(this),this._previousRect=null,function(){this._drawingModeChange$=new a,this.drawingModeChange$=this._drawingModeChange$.asObservable(),this._contributionIncrease$=new i,this.contributionIncrease$=this._contributionIncrease$.asObservable(),this._contributionDecrease$=new i,this.contributionDecrease$=this._contributionDecrease$.asObservable(),this._generate$=new i,this.generate$=this._generate$.asObservable(),this._clear$=new i,this.clear$=this._clear$.asObservable(),this._random$=new i,this.random$=this._random$.asObservable()}.call(this),function(){var e=this;document.getElementById("contributions__generate").addEventListener("click",function(t){t.preventDefault(),e._generate$.next(t.target)}),document.getElementById("contributions__clear").addEventListener("click",function(t){t.preventDefault(),e._clear$.next()}),document.getElementById("contributions__random").addEventListener("click",function(t){t.preventDefault(),e._random$.next()}),document.querySelectorAll(c).forEach(function(t){t.addEventListener("change",function(t){return e._drawingModeChange$.next(t.target.value)})}),document.addEventListener("selectionchange",function(t){return t.preventDefault()}),this._contributions.addEventListener("click",function(t){return t.preventDefault()}),this._contributions.addEventListener("contextmenu",function(t){return t.preventDefault()})}.call(this),function(){var t="checked",e=document.querySelector("".concat(c,":").concat(t));e?this._drawingModeChange$.next(e.value):(e=document.querySelector(c),this._drawingModeChange$.next(e.value),e.setAttribute(t,t))}.call(this)}var e,n,r;return e=t,(n=[{key:"activateClickMode",value:function(){this._contributions.addEventListener("mousedown",this._changeContributions),document.removeEventListener("mousedown",this._enableDrawing),document.removeEventListener("mouseup",this._disableDrawing)}},{key:"activateMoveMode",value:function(){document.addEventListener("mousedown",this._enableDrawing),document.addEventListener("mouseup",this._disableDrawing),this._contributions.removeEventListener("mousedown",this._changeContributions)}},{key:"drawContributions",value:function(t){t=t.map(function(t){var e=t.rects.map(function(t){return'<rect class="day" width="'.concat(t.width,'" height="').concat(t.height,'" x="').concat(t.x,'" y="').concat(t.y,'" fill="').concat(t.color,'" data-col="').concat(t.dataCol,'" data-row="').concat(t.dataRow,'"></rect>')}).join("");return'<g transform="translate('.concat(t.translate,', 0)">').concat(e,"</g>")}).join("");this._contributions.innerHTML=t}}])&&o(e.prototype,n),r&&o(e,r),t}()},{"../misc/replay-subject":6,"../misc/subject":7}]},{},[3]);